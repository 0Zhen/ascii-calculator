<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>ASCII Êü•Ë°®Â∑•ÂÖ∑ - Á®ãÂºèË®≠Ë®à‰∫∫Âì°Ë®àÁÆóÊ©ü | ÈÄ≤Âà∂ËΩâÊèõÂô®</title>
    <meta name="description" content="ÂÖçË≤ªÁöÑ ASCII Á¢ºÊü•Ë©¢Â∑•ÂÖ∑ÔºåÊîØÊè¥ HEX„ÄÅDEC„ÄÅOCT„ÄÅBIN ÈÄ≤Âà∂ËΩâÊèõÔºå64-bit Ë®àÁÆóÊ©üÂäüËÉΩÔºåÁ®ãÂºèË®≠Ë®à‰∫∫Âì°ÂøÖÂÇôÂ∑•ÂÖ∑„ÄÇ">
    <meta name="keywords" content="ASCII, Êü•Ë°®, ÈÄ≤Âà∂ËΩâÊèõ, HEX, ÂçÅÂÖ≠ÈÄ≤‰Ωç, Ë®àÁÆóÊ©ü, Á®ãÂºèË®≠Ë®à, Â≠óÂÖÉÁ∑®Á¢º, ASCII table, programmer calculator">
    <meta name="author" content="Your Name">
    <meta name="robots" content="index, follow">
    <meta name="language" content="zh-TW">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://‰Ω†ÁöÑÁî®Êà∂Âêç.github.io/ascii-calculator/">
    <meta property="og:title" content="ASCII Êü•Ë°®Â∑•ÂÖ∑ - Á®ãÂºèË®≠Ë®à‰∫∫Âì°Ë®àÁÆóÊ©ü">
    <meta property="og:description" content="ÂÖçË≤ªÁöÑ ASCII Á¢ºÊü•Ë©¢Â∑•ÂÖ∑ÔºåÊîØÊè¥Â§öÁ®ÆÈÄ≤Âà∂ËΩâÊèõÂíåË®àÁÆóÂäüËÉΩ">
    <meta property="og:image" content="https://‰Ω†ÁöÑÁî®Êà∂Âêç.github.io/ascii-calculator/preview.png">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://‰Ω†ÁöÑÁî®Êà∂Âêç.github.io/ascii-calculator/">
    <meta property="twitter:title" content="ASCII Êü•Ë°®Â∑•ÂÖ∑ - Á®ãÂºèË®≠Ë®à‰∫∫Âì°Ë®àÁÆóÊ©ü">
    <meta property="twitter:description" content="ÂÖçË≤ªÁöÑ ASCII Á¢ºÊü•Ë©¢Â∑•ÂÖ∑ÔºåÊîØÊè¥Â§öÁ®ÆÈÄ≤Âà∂ËΩâÊèõÂíåË®àÁÆóÂäüËÉΩ">
    <meta property="twitter:image" content="https://‰Ω†ÁöÑÁî®Êà∂Âêç.github.io/ascii-calculator/preview.png">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://‰Ω†ÁöÑÁî®Êà∂Âêç.github.io/ascii-calculator/">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üî§</text></svg>">
    
    <!-- Google Analytics (GA4) -->
    <!-- ÊõøÊèõ G-XXXXXXXXXX ÁÇ∫‰Ω†ÁöÑ Measurement ID -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-XXXXXXXXXX');
    </script>
    
    <!-- Structured Data (JSON-LD) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "ASCII Êü•Ë°®Â∑•ÂÖ∑",
        "description": "ÂÖçË≤ªÁöÑ ASCII Á¢ºÊü•Ë©¢Â∑•ÂÖ∑ÔºåÊîØÊè¥ HEX„ÄÅDEC„ÄÅOCT„ÄÅBIN ÈÄ≤Âà∂ËΩâÊèõ",
        "url": "https://‰Ω†ÁöÑÁî®Êà∂Âêç.github.io/ascii-calculator/",
        "applicationCategory": "DeveloperApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "browserRequirements": "Requires JavaScript. Requires HTML5.",
        "softwareVersion": "1.0",
        "author": {
            "@type": "Person",
            "name": "Your Name"
        }
    }
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #202020;
            color: #ffffff;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: #1f1f1f;
            padding: 10px 20px;
            border-bottom: 1px solid #333;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .menu-icon {
            font-size: 20px;
            cursor: pointer;
            padding: 5px;
        }

        .title {
            font-size: 14px;
            font-weight: normal;
        }

        .container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
            overflow: hidden;
        }

        .display-area {
            background: #2d2d2d;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .char-display {
            text-align: right;
            font-size: 72px;
            font-weight: 300;
            margin-bottom: 20px;
            min-height: 90px;
            font-family: 'Consolas', monospace;
            color: #ffffff;
        }

        .format-tabs {
            display: flex;
            gap: 0;
            margin-bottom: 15px;
            border-bottom: 1px solid #404040;
        }

        .format-tab {
            flex: 1;
            padding: 12px 0;
            background: transparent;
            border: none;
            color: #999;
            cursor: pointer;
            font-size: 12px;
            text-align: left;
            padding-left: 15px;
            transition: all 0.2s;
            border-bottom: 2px solid transparent;
        }

        .format-tab.active {
            color: #60cdff;
            border-bottom: 2px solid #60cdff;
        }

        .format-tab:hover:not(.active) {
            background: #333;
        }

        .value-display {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
            padding: 8px 15px;
        }

        .value-display.active .value-content {
            color: #60cdff;
            font-weight: 600;
        }

        .value-label {
            font-size: 12px;
            color: #999;
            width: 60px;
        }

        .value-display.active .value-label {
            color: #60cdff;
        }

        .value-content {
            font-size: 20px;
            font-family: 'Consolas', monospace;
            flex: 1;
            cursor: pointer;
            transition: color 0.2s;
        }

        .value-content:hover {
            color: #60cdff;
        }

        .keypad {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 5px;
            max-height: 400px;
        }

        .key-btn {
            background: #3b3b3b;
            border: 1px solid #404040;
            color: #ffffff;
            font-size: 16px;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.1s;
            font-family: 'Consolas', monospace;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 50px;
        }

        .key-btn:hover {
            background: #4a4a4a;
        }

        .key-btn:active {
            background: #333;
        }

        .key-btn.hex-letter {
            color: #60cdff;
        }

        .key-btn.operator {
            background: #2d2d2d;
        }

        .key-btn.special {
            font-size: 14px;
        }

        .key-btn.equals {
            background: #0078d4;
        }

        .key-btn.equals:hover {
            background: #106ebe;
        }

        .bottom-bar {
            display: flex;
            gap: 10px;
            padding: 15px;
            background: #2d2d2d;
            border-radius: 8px;
            font-size: 12px;
            color: #999;
            margin-top: 15px;
        }

        .mode-btn {
            padding: 8px 15px;
            background: transparent;
            border: 1px solid #404040;
            color: #999;
            cursor: pointer;
            border-radius: 4px;
            font-size: 11px;
        }

        .mode-btn.active {
            border-color: #60cdff;
            color: #60cdff;
        }

        /* Âª£ÂëäÂÆπÂô®Ê®£Âºè */
        .ad-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0 20px;
            text-align: center;
        }

        @media (max-width: 768px) {
            .char-display {
                font-size: 48px;
            }
            
            .keypad {
                gap: 3px;
            }
            
            .key-btn {
                min-height: 45px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="menu-icon">‚ò∞</div>
        <div class="title">Á®ãÂºèË®≠Ë®à‰∫∫Âì°</div>
    </div>

    <div class="container">
        <div class="display-area">
            <div class="char-display" id="charDisplay">0</div>
            
            <div class="format-tabs">
                <button class="format-tab" data-format="char">CHAR</button>
                <button class="format-tab active" data-format="hex">HEX</button>
                <button class="format-tab" data-format="dec">DEC</button>
                <button class="format-tab" data-format="oct">OCT</button>
                <button class="format-tab" data-format="bin">BIN</button>
            </div>

            <div class="value-display" data-format="char">
                <span class="value-label">CHAR</span>
                <span class="value-content char-value" id="charValue">NUL</span>
            </div>
            <div class="value-display" data-format="hex">
                <span class="value-label">HEX</span>
                <span class="value-content" id="hexValue">0</span>
            </div>
            <div class="value-display" data-format="dec">
                <span class="value-label">DEC</span>
                <span class="value-content" id="decValue">0</span>
            </div>
            <div class="value-display" data-format="oct">
                <span class="value-label">OCT</span>
                <span class="value-content" id="octValue">0</span>
            </div>
            <div class="value-display" data-format="bin">
                <span class="value-label">BIN</span>
                <span class="value-content" id="binValue">00000000</span>
            </div>
        </div>

        <div class="keypad" id="keypad">
            <button class="key-btn hex-letter" data-value="A">A</button>
            <button class="key-btn operator" data-value="<<">&laquo;</button>
            <button class="key-btn operator" data-value=">>">&raquo;</button>
            <button class="key-btn operator" data-value="C">C</button>
            <button class="key-btn special" data-value="back">‚å´</button>

            <button class="key-btn hex-letter" data-value="B">B</button>
            <button class="key-btn operator" data-value="(">(</button>
            <button class="key-btn operator" data-value=")">)</button>
            <button class="key-btn operator" data-value="%">%</button>
            <button class="key-btn operator" data-value="/">√∑</button>

            <button class="key-btn hex-letter" data-value="C">C</button>
            <button class="key-btn" data-value="7">7</button>
            <button class="key-btn" data-value="8">8</button>
            <button class="key-btn" data-value="9">9</button>
            <button class="key-btn operator" data-value="*">√ó</button>

            <button class="key-btn hex-letter" data-value="D">D</button>
            <button class="key-btn" data-value="4">4</button>
            <button class="key-btn" data-value="5">5</button>
            <button class="key-btn" data-value="6">6</button>
            <button class="key-btn operator" data-value="-">‚àí</button>

            <button class="key-btn hex-letter" data-value="E">E</button>
            <button class="key-btn" data-value="1">1</button>
            <button class="key-btn" data-value="2">2</button>
            <button class="key-btn" data-value="3">3</button>
            <button class="key-btn operator" data-value="+">+</button>

            <button class="key-btn hex-letter" data-value="F">F</button>
            <button class="key-btn operator" data-value="+/-">¬±</button>
            <button class="key-btn" data-value="0">0</button>
            <button class="key-btn" data-value=".">.</button>
            <button class="key-btn equals" data-value="=">=</button>
        </div>

        <div class="bottom-bar">
            <button class="mode-btn active">QWORD</button>
            <button class="mode-btn">DWORD</button>
            <button class="mode-btn">WORD</button>
            <button class="mode-btn">BYTE</button>
            <div style="flex: 1"></div>
            <a href="privacy.html" style="color: #999; text-decoration: none; font-size: 11px; display: flex; align-items: center;">Èö±ÁßÅÊîøÁ≠ñ</a>
        </div>
    </div>

    <!-- Google AdSense Âª£ÂëäÂçÄÂüü -->
    <!-- Âú®Áç≤ÂæóÊµÅÈáèÂæåÔºåÁî≥Ë´ã Google AdSense ‰∏¶ÊõøÊèõ‰ª•‰∏ã‰ª£Á¢º -->
    <div class="ad-container" id="ad-container">
        <!-- Ê©´ÂπÖÂª£Âëä (ÂèñÊ∂àË®ªËß£‰∏¶ÊõøÊèõÁÇ∫‰Ω†ÁöÑÂª£Âëä‰ª£Á¢º) -->
        <!--
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
             data-ad-slot="XXXXXXXXXX"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
        -->
    </div>

    <script>
        let currentValue = 0n; // ‰ΩøÁî® BigInt ÊîØÊè¥Â§ßÊï∏
        let currentFormat = 'hex';
        let inputBuffer = '';
        let operator = null;
        let previousValue = null;
        let shouldResetOnNextInput = false;
        let maxBits = 64; // È†êË®≠ 64-bit (QWORD)

        const asciiDescriptions = {
            0: 'NUL', 1: 'SOH', 2: 'STX', 3: 'ETX', 4: 'EOT', 5: 'ENQ', 6: 'ACK', 7: 'BEL',
            8: 'BS', 9: 'TAB', 10: 'LF', 11: 'VT', 12: 'FF', 13: 'CR', 14: 'SO', 15: 'SI',
            16: 'DLE', 17: 'DC1', 18: 'DC2', 19: 'DC3', 20: 'DC4', 21: 'NAK', 22: 'SYN', 23: 'ETB',
            24: 'CAN', 25: 'EM', 26: 'SUB', 27: 'ESC', 28: 'FS', 29: 'GS', 30: 'RS', 31: 'US',
            32: 'SPACE', 127: 'DEL'
        };

        function getMaxValue() {
            // Ê†πÊìöÁï∂ÂâçÊ®°ÂºèËøîÂõûÊúÄÂ§ßÂÄº
            switch (maxBits) {
                case 8: return 0xFFn; // BYTE
                case 16: return 0xFFFFn; // WORD
                case 32: return 0xFFFFFFFFn; // DWORD
                case 64: return 0xFFFFFFFFFFFFFFFFn; // QWORD
                default: return 0xFFFFFFFFFFFFFFFFn;
            }
        }

        function updateDisplay(value) {
            // ËΩâÊèõÁÇ∫ BigInt
            if (typeof value !== 'bigint') {
                value = BigInt(value);
            }
            
            // Á¢∫‰øùÂú®ÁØÑÂúçÂÖß
            const maxValue = getMaxValue();
            if (value < 0n) value = 0n;
            if (value > maxValue) value = maxValue;
            
            currentValue = value;
            
            // Êõ¥Êñ∞Â≠óÁ¨¶È°ØÁ§∫ (Âè™Â∞ç ASCII ÁØÑÂúçÊúâÊïà)
            const charValueElem = document.getElementById('charValue');
            if (value <= 127n) {
                const numValue = Number(value);
                if (numValue < 32) {
                    charValueElem.textContent = asciiDescriptions[numValue] || 'CTRL';
                } else if (numValue === 32) {
                    charValueElem.textContent = 'SPACE';
                } else if (numValue === 127) {
                    charValueElem.textContent = 'DEL';
                } else {
                    charValueElem.textContent = String.fromCharCode(numValue);
                }
            } else {
                charValueElem.textContent = '-';
            }
            
            // Êõ¥Êñ∞ÂêÑÁ®ÆÈÄ≤‰ΩçÈ°ØÁ§∫
            const hexStr = value.toString(16).toUpperCase();
            document.getElementById('hexValue').textContent = hexStr;
            document.getElementById('decValue').textContent = value.toString();
            document.getElementById('octValue').textContent = value.toString(8);
            document.getElementById('binValue').textContent = value.toString(2).padStart(Math.min(Number(value).toString(2).length, maxBits), '0');

            // Êõ¥Êñ∞Â§ßÂ≠óÈ°ØÁ§∫
            const charDisplay = document.getElementById('charDisplay');
            if (value <= 127n) {
                const numValue = Number(value);
                if (numValue < 32) {
                    charDisplay.textContent = asciiDescriptions[numValue] || 'CTRL';
                } else if (numValue === 32) {
                    charDisplay.textContent = 'SPACE';
                } else if (numValue === 127) {
                    charDisplay.textContent = 'DEL';
                } else {
                    charDisplay.textContent = String.fromCharCode(numValue);
                }
            } else {
                // Â§ßÊñº ASCII ÁØÑÂúçÔºåÈ°ØÁ§∫ÂçÅÂÖ≠ÈÄ≤‰Ωç
                charDisplay.textContent = hexStr;
            }
        }

        function calculate() {
            if (previousValue === null || operator === null) return;
            
            let result;
            const prev = typeof previousValue === 'bigint' ? previousValue : BigInt(previousValue);
            const curr = typeof currentValue === 'bigint' ? currentValue : BigInt(currentValue);
            
            try {
                switch (operator) {
                    case '+':
                        result = prev + curr;
                        break;
                    case '-':
                        result = prev - curr;
                        break;
                    case '*':
                        result = prev * curr;
                        break;
                    case '/':
                        result = curr !== 0n ? prev / curr : 0n;
                        break;
                    case '%':
                        result = curr !== 0n ? prev % curr : 0n;
                        break;
                    case '<<':
                        result = prev << curr;
                        break;
                    case '>>':
                        result = prev >> curr;
                        break;
                    default:
                        return;
                }
                
                // Á¢∫‰øùÁµêÊûúÂú®ÁØÑÂúçÂÖß
                const maxValue = getMaxValue();
                if (result < 0n) result = 0n;
                if (result > maxValue) result = maxValue;
                
                updateDisplay(result);
            } catch (e) {
                console.error('Ë®àÁÆóÈåØË™§:', e);
                updateDisplay(0n);
            }
            
            previousValue = null;
            operator = null;
            shouldResetOnNextInput = true;
        }

        // Ê†ºÂºèÂàáÊèõ
        document.querySelectorAll('.format-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.format-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                currentFormat = tab.getAttribute('data-format');
                inputBuffer = '';
                updateKeypadState();
                
                // Êõ¥Êñ∞Êï∏ÂÄºÈ°ØÁ§∫ÁöÑÈ´ò‰∫Æ
                updateValueHighlight();
            });
        });

        // Êõ¥Êñ∞Êï∏ÂÄºÈ°ØÁ§∫È´ò‰∫Æ
        function updateValueHighlight() {
            // ÁßªÈô§ÊâÄÊúâÈ´ò‰∫Æ
            document.querySelectorAll('.value-display').forEach(display => {
                display.classList.remove('active');
            });
            
            // Ê∑ªÂä†Áï∂ÂâçÊ†ºÂºèÁöÑÈ´ò‰∫Æ
            const currentDisplay = document.querySelector(`.value-display[data-format="${currentFormat}"]`);
            if (currentDisplay) {
                currentDisplay.classList.add('active');
            }
        }

        // Êõ¥Êñ∞ÈçµÁõ§ÁãÄÊÖã
        function updateKeypadState() {
            document.querySelectorAll('.key-btn').forEach(btn => {
                const value = btn.getAttribute('data-value');
                
                // Ê†πÊìöÁï∂ÂâçÊ†ºÂºèÁ¶ÅÁî®/ÂïüÁî®ÊåâÈàï
                if (currentFormat === 'char') {
                    // Â≠óÁ¨¶Ê®°Âºè‰∏ãÁ¶ÅÁî®ÊâÄÊúâÊï∏Â≠óÈçµÁõ§
                    if (['0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F'].includes(value)) {
                        btn.style.opacity = '0.3';
                        btn.style.pointerEvents = 'none';
                    } else {
                        btn.style.opacity = '1';
                        btn.style.pointerEvents = 'auto';
                    }
                } else if (currentFormat === 'bin') {
                    // ‰∫åÈÄ≤‰ΩçÂè™ËÉΩÁî® 0 Âíå 1
                    if (['2','3','4','5','6','7','8','9','A','B','C','D','E','F'].includes(value)) {
                        btn.style.opacity = '0.3';
                        btn.style.pointerEvents = 'none';
                    } else {
                        btn.style.opacity = '1';
                        btn.style.pointerEvents = 'auto';
                    }
                } else if (currentFormat === 'oct') {
                    // ÂÖ´ÈÄ≤‰Ωç‰∏çËÉΩÁî® 8, 9, A-F
                    if (['8','9','A','B','C','D','E','F'].includes(value)) {
                        btn.style.opacity = '0.3';
                        btn.style.pointerEvents = 'none';
                    } else {
                        btn.style.opacity = '1';
                        btn.style.pointerEvents = 'auto';
                    }
                } else if (currentFormat === 'dec') {
                    // ÂçÅÈÄ≤‰Ωç‰∏çËÉΩÁî® A-F
                    if (['A','B','C','D','E','F'].includes(value)) {
                        btn.style.opacity = '0.3';
                        btn.style.pointerEvents = 'none';
                    } else {
                        btn.style.opacity = '1';
                        btn.style.pointerEvents = 'auto';
                    }
                } else {
                    // ÂçÅÂÖ≠ÈÄ≤‰ΩçÂÖ®ÈÉ®ÂèØÁî®
                    btn.style.opacity = '1';
                    btn.style.pointerEvents = 'auto';
                }
            });
        }

        // ÊåâÈçµËôïÁêÜ
        document.querySelectorAll('.key-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const value = btn.getAttribute('data-value');
                
                if (value === 'C') {
                    // Ê∏ÖÈô§
                    inputBuffer = '';
                    updateDisplay(0n);
                    operator = null;
                    previousValue = null;
                    shouldResetOnNextInput = false;
                } else if (value === 'back') {
                    // ÈÄÄÊ†º
                    inputBuffer = inputBuffer.slice(0, -1);
                    if (inputBuffer === '') {
                        updateDisplay(0n);
                    } else {
                        try {
                            let newValue;
                            if (getBase() === 16) {
                                newValue = BigInt('0x' + inputBuffer);
                            } else {
                                newValue = BigInt(parseInt(inputBuffer, getBase()));
                            }
                            if (newValue <= getMaxValue()) {
                                updateDisplay(newValue);
                            }
                        } catch (e) {
                            updateDisplay(0n);
                        }
                    }
                } else if (['+', '-', '*', '/', '%', '<<', '>>'].includes(value)) {
                    // ÈÅãÁÆóÁ¨¶
                    if (operator !== null && !shouldResetOnNextInput) {
                        calculate();
                    }
                    operator = value;
                    previousValue = currentValue;
                    shouldResetOnNextInput = true;
                    inputBuffer = '';
                } else if (value === '=') {
                    // Á≠âÊñº
                    calculate();
                    inputBuffer = '';
                } else if (value === '+/-') {
                    // Ê≠£Ë≤†Ëôü - Âú®ÁÑ°Á¨¶ËôüÊï¥Êï∏‰∏≠ÔºåÂØ¶‰ΩúÁÇ∫ÊúÄÂ§ßÂÄºÊ∏õÁï∂ÂâçÂÄº
                    updateDisplay(getMaxValue() - currentValue);
                    inputBuffer = '';
                } else if (['0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F'].includes(value)) {
                    // Êï∏Â≠óËº∏ÂÖ•
                    if (shouldResetOnNextInput) {
                        inputBuffer = '';
                        shouldResetOnNextInput = false;
                    }
                    
                    inputBuffer += value;
                    try {
                        let newValue;
                        if (getBase() === 16) {
                            newValue = BigInt('0x' + inputBuffer);
                        } else {
                            newValue = BigInt(parseInt(inputBuffer, getBase()));
                        }
                        
                        if (newValue <= getMaxValue()) {
                            updateDisplay(newValue);
                        } else {
                            // Ë∂ÖÂá∫ÁØÑÂúçÔºåÁßªÈô§ÊúÄÂæå‰∏ÄÂÄãÂ≠óÁ¨¶
                            inputBuffer = inputBuffer.slice(0, -1);
                        }
                    } catch (e) {
                        inputBuffer = inputBuffer.slice(0, -1);
                    }
                }
            });
        });

        function getBase() {
            switch (currentFormat) {
                case 'char': return 10;
                case 'hex': return 16;
                case 'dec': return 10;
                case 'oct': return 8;
                case 'bin': return 2;
                default: return 10;
            }
        }

        // ÂÖ®ÂüüÈçµÁõ§Áõ£ËÅΩÔºàÊîØÊè¥ÊâÄÊúâÊ†ºÂºèÔºâ
        document.addEventListener('keydown', (e) => {
            // CHAR Ê®°Âºè
            if (currentFormat === 'char') {
                // Â¶ÇÊûúÊòØÂèØÊâìÂç∞Â≠óÁ¨¶ÔºàÊéíÈô§ÂäüËÉΩÈçµÔºâ
                if (e.key.length === 1) {
                    e.preventDefault();
                    const code = e.key.charCodeAt(0);
                    if (code >= 0 && code <= 127) {
                        updateDisplay(BigInt(code));
                    }
                }
                // ËôïÁêÜÁâπÊÆäÈçµ
                else if (e.key === 'Enter') {
                    e.preventDefault();
                    updateDisplay(13n); // CR
                } else if (e.key === 'Tab') {
                    e.preventDefault();
                    updateDisplay(9n); // TAB
                } else if (e.key === 'Backspace') {
                    e.preventDefault();
                    updateDisplay(8n); // BS
                } else if (e.key === 'Escape') {
                    e.preventDefault();
                    updateDisplay(27n); // ESC
                }
            }
            // HEX, DEC, OCT, BIN Ê®°Âºè
            else {
                // ËôïÁêÜÊï∏Â≠óÂíåÂ≠óÊØçÈçµ
                let keyValue = e.key.toUpperCase();
                
                // Ê™¢Êü•ÊòØÂê¶ÁÇ∫ÊúâÊïàÁöÑËº∏ÂÖ•Â≠óÁ¨¶
                let isValidKey = false;
                
                if (currentFormat === 'hex') {
                    isValidKey = /^[0-9A-F]$/.test(keyValue);
                } else if (currentFormat === 'dec') {
                    isValidKey = /^[0-9]$/.test(keyValue);
                } else if (currentFormat === 'oct') {
                    isValidKey = /^[0-7]$/.test(keyValue);
                } else if (currentFormat === 'bin') {
                    isValidKey = /^[0-1]$/.test(keyValue);
                }
                
                if (isValidKey) {
                    e.preventDefault();
                    if (shouldResetOnNextInput) {
                        inputBuffer = '';
                        shouldResetOnNextInput = false;
                    }
                    
                    inputBuffer += keyValue;
                    try {
                        let newValue;
                        if (getBase() === 16) {
                            newValue = BigInt('0x' + inputBuffer);
                        } else {
                            newValue = BigInt(parseInt(inputBuffer, getBase()));
                        }
                        
                        if (newValue <= getMaxValue()) {
                            updateDisplay(newValue);
                        } else {
                            // Ë∂ÖÂá∫ÁØÑÂúçÔºåÁßªÈô§ÊúÄÂæå‰∏ÄÂÄãÂ≠óÁ¨¶
                            inputBuffer = inputBuffer.slice(0, -1);
                        }
                    } catch (e) {
                        inputBuffer = inputBuffer.slice(0, -1);
                    }
                }
                // ËôïÁêÜÁâπÊÆäÊåâÈçµ
                else if (e.key === 'Backspace') {
                    e.preventDefault();
                    inputBuffer = inputBuffer.slice(0, -1);
                    if (inputBuffer === '') {
                        updateDisplay(0n);
                    } else {
                        try {
                            let newValue;
                            if (getBase() === 16) {
                                newValue = BigInt('0x' + inputBuffer);
                            } else {
                                newValue = BigInt(parseInt(inputBuffer, getBase()));
                            }
                            
                            if (newValue <= getMaxValue()) {
                                updateDisplay(newValue);
                            }
                        } catch (e) {
                            updateDisplay(0n);
                        }
                    }
                } else if (e.key === 'Escape' || e.key === 'c' || e.key === 'C') {
                    if (e.key === 'Escape' || e.ctrlKey) {
                        e.preventDefault();
                        inputBuffer = '';
                        updateDisplay(0n);
                        operator = null;
                        previousValue = null;
                        shouldResetOnNextInput = false;
                    }
                } else if (e.key === 'Enter' || e.key === '=') {
                    e.preventDefault();
                    calculate();
                    inputBuffer = '';
                } else if (['+', '-', '*', '/', '%'].includes(e.key)) {
                    e.preventDefault();
                    if (operator !== null && !shouldResetOnNextInput) {
                        calculate();
                    }
                    operator = e.key;
                    previousValue = currentValue;
                    shouldResetOnNextInput = true;
                    inputBuffer = '';
                }
            }
        });

        // ÈªûÊìäÊï∏ÂÄºË§áË£Ω
        document.querySelectorAll('.value-content').forEach(elem => {
            elem.addEventListener('click', () => {
                const text = elem.textContent;
                navigator.clipboard.writeText(text).then(() => {
                    const original = elem.textContent;
                    elem.textContent = 'Â∑≤Ë§áË£Ω!';
                    setTimeout(() => {
                        elem.textContent = original;
                    }, 1000);
                });
            });
        });

        // Â∫ïÈÉ®Ê®°ÂºèÊåâÈàïÂäüËÉΩ
        document.querySelectorAll('.mode-btn').forEach((btn, index) => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                // Ë®≠ÂÆöÊúÄÂ§ß‰ΩçÂÖÉÊï∏
                switch (index) {
                    case 0: maxBits = 64; break; // QWORD
                    case 1: maxBits = 32; break; // DWORD
                    case 2: maxBits = 16; break; // WORD
                    case 3: maxBits = 8; break;  // BYTE
                }
                
                // Â¶ÇÊûúÁï∂ÂâçÂÄºË∂ÖÈÅéÊñ∞ÁöÑÊúÄÂ§ßÂÄºÔºåÂâáÊà™Êñ∑
                if (currentValue > getMaxValue()) {
                    updateDisplay(getMaxValue());
                }
            });
        });

        // ÂàùÂßãÂåñ
        updateDisplay(0n);
        updateKeypadState();
        updateValueHighlight();
    </script>
</body>
</html>
